# 🚀 交互式测试客户端 - 快速开始

## 一键启动

### Mac/Linux
```bash
cd im-client
./run_interactive_client.sh
```

### Windows
```bash
cd im-client
run_interactive_client.bat
```

### 手动启动（任何系统）
```bash
cd im-client
mvn exec:java -Dexec.mainClass="com.xzll.client.protobuf.interactive.InteractiveTestClient"
```

## 快速使用示例

### 1️⃣ 启动时输入用户ID
```
请输入当前用户ID（发送方，例如: user1）: testuser
✅ 当前用户: testuser
正在连接服务器...
✅ 连接成功！
```

### 2️⃣ 快速发送消息
```bash
# 方式1: 完整模式（每次输入接收方）
> send
接收方用户ID: user2
消息内容: 你好，这是测试消息
✅ 消息已发送

# 方式2: 快速模式（连续发送给同一人）
> q user2
[发送给 user2] > 消息1
  ✓ 已发送
[发送给 user2] > 消息2
  ✓ 已发送
[发送给 user2] > back
✅ 退出快速发送模式
```

### 3️⃣ 查看帮助
```bash
> help
```

### 4️⃣ 查看状态
```bash
> status
```

## 常用命令

| 命令 | 简写 | 说明 |
|-----|------|-----|
| `send` | `s` | 发送消息（完整模式） |
| `quick <用户ID>` | `q <用户ID>` | 快速发送模式 |
| `friend list` | `f l` | 查看待处理好友请求 |
| `friend accept <id>` | `f a <id>` | 同意好友请求 |
| `friend reject <id>` | `f r <id>` | 拒绝好友请求 |
| `status` | - | 查看连接状态 |
| `help` | `h` | 显示帮助 |
| `clear` | `cls` | 清屏 |
| `exit` | `quit` | 退出 |

## 💡 最佳实践

### 与移动端联调
1. 启动此客户端：`testuser`
2. 移动端登录：`mobileuser`
3. 快速发送：`q mobileuser`
4. 开始发送消息并观察移动端

### 多人聊天测试
打开2个终端，分别启动客户端：
- **终端1**: 用户 `user1`
- **终端2**: 用户 `user2`

然后互相发送消息测试。

### 好友请求测试
1. 收到好友请求后，会自动显示处理方式
2. 使用 `friend list` 查看所有待处理请求
3. 使用 `friend accept <id>` 同意请求
4. 使用 `friend reject <id>` 拒绝请求

## 🔧 常见问题

### Q1: 连接失败，提示握手错误？

**A**: 检查以下几点：
1. **服务器是否启动**：im-connect 服务必须运行
2. **URL是否正确**：必须是 `ws://ip:port/websocket?userId=xxx`
3. **端口是否正确**：默认是 8081
4. **Token是否有效**：如果过期需要更新token

### Q2: 如何修改服务器地址？

**A**: 编辑 `InteractiveTestClient.java`：
```java
URI uri = new URI("ws://你的IP:端口/websocket?userId=" + currentUserId);
```

⚠️ **重要**：保持 `/websocket?userId=` 参数不变！

## 📖 完整文档

详细文档请查看：[README.md](./README.md)

---

**Happy Testing!** 🎉

