<mxfile host="Electron" modified="2025-09-18T22:03:00.484Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.1.18 Chrome/120.0.6099.199 Electron/28.1.2 Safari/537.36" etag="9NReq2rO0siOEso1nV9t" version="22.1.18" type="device">
  <diagram name="XZLL-IM物理部署拓扑图" id="physical-deployment">
    <mxGraphModel dx="1546" dy="947" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1369" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="XZLL-IM 物理部署拓扑图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1976D2;" parent="1" vertex="1">
          <mxGeometry x="500" y="10" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="clients-layer" value="🖥️ 客户端层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="70" width="320" height="100" as="geometry" />
        </mxCell>
        <mxCell id="web-client" value="Web客户端" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=11;" parent="clients-layer" vertex="1">
          <mxGeometry x="20" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mobile-client" value="移动端客户端" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#388E3C;fontSize=11;fontStyle=1;" parent="clients-layer" vertex="1">
          <mxGeometry x="120" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="pc-client" value="PC客户端" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=11;" parent="clients-layer" vertex="1">
          <mxGeometry x="220" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="public-server" value="🌐 公网服务器" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF8F00;strokeWidth=3;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="450" y="70" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="frp-server" value="FRP Server&lt;br&gt;公网IP&lt;br&gt;内网穿透服务端" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF8F00;fontSize=11;" parent="public-server" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="internal-network" value="🏠 内网环境 (192.168.1.0/24)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;strokeWidth=2;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="40" y="220" width="1520" height="1100" as="geometry" />
        </mxCell>
        <mxCell id="lb-node" value="⚖️ 192.168.1.101" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="40" y="50" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="nginx" value="Nginx&lt;br&gt;负载均衡+反向代理&lt;br&gt;:80/:443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="frp-client" value="FRP Client&lt;br&gt;内网穿透客户端" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="85" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="im-app1" value="IM服务集群&lt;br&gt;(规划部署)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="135" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="monitor-node" value="📊 192.168.1.102" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="280" y="50" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="prometheus" value="Prometheus&lt;br&gt;指标采集:9090" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="grafana" value="Grafana&lt;br&gt;监控面板:3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="80" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="skywalking" value="Skywalking&lt;br&gt;链路追踪:8080" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="125" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="im-app2" value="IM服务集群&lt;br&gt;(规划部署)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="170" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="app-node" value="🔧 192.168.1.150 (Docker Compose)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="520" y="50" width="280" height="280" as="geometry" />
        </mxCell>
        <mxCell id="gateway-service" value="im-gateway:8081" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="35" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="auth-service" value="im-auth:8082" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="35" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="business-service" value="im-business:8083" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="75" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="console-service" value="im-console:8084" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="75" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="datasync-service" value="im-data-sync:8085" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="115" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="connect-service" value="im-connect:10001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="115" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nacos-service" value="Nacos:8848" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="155" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jenkins-service" value="Jenkins CI/CD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="155" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="docker-service" value="Docker Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="80" y="195" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="master-node" value="🏛️ 192.168.1.130 (集群主节点)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=3;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="40" y="380" width="250" height="300" as="geometry" />
        </mxCell>
        <mxCell id="zk-master" value="ZooKeeper Master&lt;br&gt;:2181" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rmq-master" value="RocketMQ Master&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hbase-master" value="HBase Master" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="20" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hdfs-master" value="HDFS NameNode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="130" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hadoop-master" value="Hadoop Master" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="20" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mysql-master" value="MySQL Master&lt;br&gt;:3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="130" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slave1-node" value="🔧 192.168.1.131 (集群从节点1)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="320" y="380" width="250" height="300" as="geometry" />
        </mxCell>
        <mxCell id="zk-slave1" value="ZooKeeper Follower&lt;br&gt;:2181" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rmq-slave1" value="RocketMQ Follower&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hbase-slave1" value="HBase RegionServer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="20" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hdfs-slave1" value="HDFS DataNode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="130" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hadoop-slave1" value="Hadoop Worker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="20" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="redis-service" value="Redis&lt;br&gt;:6379" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="130" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mysql-slave" value="MySQL Slave&lt;br&gt;:3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="75" y="190" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="slave2-node" value="🔧 192.168.1.132 (集群从节点2)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="600" y="380" width="250" height="300" as="geometry" />
        </mxCell>
        <mxCell id="zk-slave2" value="ZooKeeper Follower&lt;br&gt;:2181" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rmq-slave2" value="RocketMQ Follower&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hbase-slave2" value="HBase RegionServer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="20" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hdfs-slave2" value="HDFS DataNode" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="130" y="90" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hadoop-slave2" value="Hadoop Worker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="20" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="elasticsearch-service" value="Elasticsearch&lt;br&gt;:9200" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="130" y="140" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="clients-to-public" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="clients-layer" target="public-server" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="120" as="sourcePoint" />
            <mxPoint x="450" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="public-to-lb" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="public-server" target="lb-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="170" as="sourcePoint" />
            <mxPoint x="140" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="frp-connection" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="frp-server" target="frp-client" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="170" as="sourcePoint" />
            <mxPoint x="140" y="355" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-to-app" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="lb-node" target="app-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="350" as="sourcePoint" />
            <mxPoint x="560" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="app-to-master" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="app-node" target="master-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="330" as="sourcePoint" />
            <mxPoint x="165" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mysql-replication" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="mysql-master" target="mysql-slave" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="580" as="sourcePoint" />
            <mxPoint x="445" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="config-table" value="📋 节点配置表&lt;br&gt;&lt;br&gt;• 192.168.1.101: 负载均衡+代理 (Nginx, FRP Client)&lt;br&gt;• 192.168.1.102: 监控节点 (Prometheus, Grafana, Skywalking)&lt;br&gt;• 192.168.1.150: 应用服务 (IM微服务群, Nacos, Jenkins)&lt;br&gt;• 192.168.1.130: 集群主节点 (ZK/RMQ/HBase Master, MySQL Master)&lt;br&gt;• 192.168.1.131: 集群从节点1 (Followers, Redis, MySQL Slave)&lt;br&gt;• 192.168.1.132: 集群从节点2 (Followers, Elasticsearch)" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="920" y="280" width="420" height="140" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="图例说明：&lt;br&gt;━━━ 主要业务流&lt;br&gt;┈┈┈ 内网穿透/主从复制&lt;br&gt;🌐 公网环境&lt;br&gt;🏠 内网环境&lt;br&gt;⚖️ 负载均衡层&lt;br&gt;📊 监控层&lt;br&gt;🔧 应用/数据层&lt;br&gt;🏛️ 集群主节点" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="920" y="440" width="200" height="160" as="geometry" />
        </mxCell>
        <mxCell id="features" value="🎯 架构特点：&lt;br&gt;&lt;br&gt;• 高可用: 主从复制、集群部署&lt;br&gt;• 负载均衡: Nginx多节点分发&lt;br&gt;• 内网穿透: FRP公网访问&lt;br&gt;• 容器化: Docker Compose编排&lt;br&gt;• 监控完备: Prometheus+Grafana&lt;br&gt;• 弹性扩展: 支持水平扩容&lt;br&gt;• 数据安全: 多副本存储" style="text;html=1;strokeColor=#4CAF50;fillColor=#E8F5E8;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="1140" y="440" width="200" height="160" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
