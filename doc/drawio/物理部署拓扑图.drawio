<mxfile host="Electron" modified="2026-01-29T09:55:31.966Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.1.18 Chrome/120.0.6099.199 Electron/28.1.2 Safari/537.36" etag="gldC5MezHSDr4xMARFbE" version="22.1.18" type="device">
  <diagram name="XZLL-IMç‰©ç†éƒ¨ç½²æ‹“æ‰‘å›¾" id="physical-deployment">
    <mxGraphModel dx="1546" dy="947" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1369" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="XZLL-IM ç‰©ç†éƒ¨ç½²æ‹“æ‰‘å›¾" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1976D2;" parent="1" vertex="1">
          <mxGeometry x="500" y="10" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="clients-layer" value="ðŸ–¥ï¸ å®¢æˆ·ç«¯å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="70" width="320" height="100" as="geometry" />
        </mxCell>
        <mxCell id="web-client" value="Webå®¢æˆ·ç«¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=11;" parent="clients-layer" vertex="1">
          <mxGeometry x="20" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mobile-client" value="ç§»åŠ¨ç«¯å®¢æˆ·ç«¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#388E3C;fontSize=11;fontStyle=1;" parent="clients-layer" vertex="1">
          <mxGeometry x="120" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="pc-client" value="PCå®¢æˆ·ç«¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=11;" parent="clients-layer" vertex="1">
          <mxGeometry x="220" y="35" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="public-server" value="ðŸŒ å…¬ç½‘æœåŠ¡å™¨" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF8F00;strokeWidth=3;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="450" y="70" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="frp-server" value="FRP Server&lt;br&gt;å…¬ç½‘IP&lt;br&gt;å†…ç½‘ç©¿é€æœåŠ¡ç«¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF8F00;fontSize=11;" parent="public-server" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="internal-network" value="ðŸ  å†…ç½‘çŽ¯å¢ƒ (192.168.1.0/24)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;strokeWidth=2;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="40" y="220" width="1520" height="1100" as="geometry" />
        </mxCell>
        <mxCell id="lb-node" value="âš–ï¸ 192.168.1.101" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="40" y="50" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="nginx" value="Nginx&lt;br&gt;è´Ÿè½½å‡è¡¡+åå‘ä»£ç†&lt;br&gt;:80/:443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="frp-client" value="FRP Client&lt;br&gt;å†…ç½‘ç©¿é€å®¢æˆ·ç«¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="85" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="im-app1" value="IMæœåŠ¡é›†ç¾¤&lt;br&gt;(è§„åˆ’éƒ¨ç½²)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=10;" parent="lb-node" vertex="1">
          <mxGeometry x="20" y="135" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="monitor-node" value="ðŸ“Š 192.168.1.102" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="280" y="50" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="prometheus" value="Prometheus&lt;br&gt;æŒ‡æ ‡é‡‡é›†:9090" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="35" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="grafana" value="Grafana&lt;br&gt;ç›‘æŽ§é¢æ¿:3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="80" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="skywalking" value="Skywalking&lt;br&gt;é“¾è·¯è¿½è¸ª:8080" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="125" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="im-app2" value="IMæœåŠ¡é›†ç¾¤&lt;br&gt;(è§„åˆ’éƒ¨ç½²)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=10;" parent="monitor-node" vertex="1">
          <mxGeometry x="20" y="170" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="app-node" value="ðŸ”§ 192.168.1.150 (Docker Compose)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="520" y="50" width="280" height="280" as="geometry" />
        </mxCell>
        <mxCell id="gateway-service" value="im-gateway:8081" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="35" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="auth-service" value="im-auth:8082" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="35" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="business-service" value="im-business:8083" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="75" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="console-service" value="im-console:8084" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="75" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="datasync-service" value="im-data-sync:8085&lt;br&gt;MongoDBâ†’ES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="115" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="connect-service" value="im-connect:10001" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="115" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nacos-service" value="Nacos:8848" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="20" y="155" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jenkins-service" value="Jenkins CI/CD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="140" y="155" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="docker-service" value="Docker Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=10;" parent="app-node" vertex="1">
          <mxGeometry x="80" y="195" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="master-node" value="ðŸ›ï¸ 192.168.1.130 (é›†ç¾¤ä¸»èŠ‚ç‚¹)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=3;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="40" y="380" width="250" height="220" as="geometry" />
        </mxCell>
        <mxCell id="rmq-master" value="RocketMQ Master&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mongodb-shard1" value="MongoDB Shard1&lt;br&gt;:27017&lt;br&gt;åˆ†ç‰‡é”®:conversation_id" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mysql-master" value="MySQL Master&lt;br&gt;:3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=10;" parent="master-node" vertex="1">
          <mxGeometry x="75" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slave1-node" value="ðŸ”§ 192.168.1.131 (é›†ç¾¤ä»ŽèŠ‚ç‚¹1)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="320" y="380" width="250" height="220" as="geometry" />
        </mxCell>
        <mxCell id="rmq-slave1" value="RocketMQ Follower&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mongodb-shard2" value="MongoDB Shard2&lt;br&gt;:27017" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mysql-slave" value="MySQL Slave&lt;br&gt;:3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="20" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="redis-service" value="Redis&lt;br&gt;:6379" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave1-node" vertex="1">
          <mxGeometry x="130" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="slave2-node" value="ðŸ”§ 192.168.1.132 (é›†ç¾¤ä»ŽèŠ‚ç‚¹2)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="internal-network" vertex="1">
          <mxGeometry x="600" y="380" width="250" height="220" as="geometry" />
        </mxCell>
        <mxCell id="rmq-slave2" value="RocketMQ Follower&lt;br&gt;:9876 DLedger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="mongodb-shard3" value="MongoDB Shard3&lt;br&gt;:27017" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="elasticsearch-service" value="Elasticsearch&lt;br&gt;:9200" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=10;" parent="slave2-node" vertex="1">
          <mxGeometry x="75" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="clients-to-public" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="clients-layer" target="public-server" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="120" as="sourcePoint" />
            <mxPoint x="450" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="public-to-lb" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="public-server" target="lb-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="170" as="sourcePoint" />
            <mxPoint x="140" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="frp-connection" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="frp-server" target="frp-client" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="170" as="sourcePoint" />
            <mxPoint x="140" y="355" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-to-app" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="lb-node" target="app-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="350" as="sourcePoint" />
            <mxPoint x="560" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="app-to-master" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="app-node" target="master-node" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="330" as="sourcePoint" />
            <mxPoint x="165" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mysql-replication" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="mysql-master" target="mysql-slave" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="580" as="sourcePoint" />
            <mxPoint x="445" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="config-table" value="ðŸ“‹ èŠ‚ç‚¹é…ç½®è¡¨&lt;br&gt;&lt;br&gt;â€¢ 192.168.1.101: è´Ÿè½½å‡è¡¡+ä»£ç† (Nginx, FRP Client)&lt;br&gt;â€¢ 192.168.1.102: ç›‘æŽ§èŠ‚ç‚¹ (Prometheus, Grafana, Skywalking)&lt;br&gt;â€¢ 192.168.1.150: åº”ç”¨æœåŠ¡ (IMå¾®æœåŠ¡ç¾¤, Nacos, Jenkins)&lt;br&gt;â€¢ 192.168.1.130: é›†ç¾¤ä¸»èŠ‚ç‚¹ (RMQ Master, MongoDB Shard1, MySQL Master)&lt;br&gt;â€¢ 192.168.1.131: é›†ç¾¤ä»ŽèŠ‚ç‚¹1 (RMQ Follower, MongoDB Shard2, Redis, MySQL Slave)&lt;br&gt;â€¢ 192.168.1.132: é›†ç¾¤ä»ŽèŠ‚ç‚¹2 (RMQ Follower, MongoDB Shard3, Elasticsearch)" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="920" y="280" width="480" height="140" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="å›¾ä¾‹è¯´æ˜Žï¼š&lt;br&gt;â”â”â” ä¸»è¦ä¸šåŠ¡æµ&lt;br&gt;â”ˆâ”ˆâ”ˆ å†…ç½‘ç©¿é€/ä¸»ä»Žå¤åˆ¶&lt;br&gt;ðŸŒ å…¬ç½‘çŽ¯å¢ƒ&lt;br&gt;ðŸ  å†…ç½‘çŽ¯å¢ƒ&lt;br&gt;âš–ï¸ è´Ÿè½½å‡è¡¡å±‚&lt;br&gt;ðŸ“Š ç›‘æŽ§å±‚&lt;br&gt;ðŸ”§ åº”ç”¨/æ•°æ®å±‚&lt;br&gt;ðŸ›ï¸ é›†ç¾¤ä¸»èŠ‚ç‚¹" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="920" y="440" width="200" height="160" as="geometry" />
        </mxCell>
        <mxCell id="features" value="ðŸŽ¯ æž¶æž„ç‰¹ç‚¹ï¼š&lt;br&gt;&lt;br&gt;â€¢ é«˜å¯ç”¨: ä¸»ä»Žå¤åˆ¶ã€é›†ç¾¤éƒ¨ç½²&lt;br&gt;â€¢ è´Ÿè½½å‡è¡¡: Nginxå¤šèŠ‚ç‚¹åˆ†å‘&lt;br&gt;â€¢ å†…ç½‘ç©¿é€: FRPå…¬ç½‘è®¿é—®&lt;br&gt;â€¢ å®¹å™¨åŒ–: Docker Composeç¼–æŽ’&lt;br&gt;â€¢ ç›‘æŽ§å®Œå¤‡: Prometheus+Grafana&lt;br&gt;â€¢ å¼¹æ€§æ‰©å±•: æ”¯æŒæ°´å¹³æ‰©å®¹&lt;br&gt;â€¢ MongoDBåˆ†ç‰‡: 3èŠ‚ç‚¹é›†ç¾¤&lt;br&gt;â€¢ æ™ºèƒ½è·¯ç”±: MongoDB/ESè‡ªåŠ¨é€‰æ‹©" style="text;html=1;strokeColor=#4CAF50;fillColor=#E8F5E8;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="1140" y="440" width="220" height="180" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
