<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" version="22.1.11" etag="draw-io-file" type="device">
  <diagram name="XZLL-IM系统架构图" id="system-architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 客户端层 -->
        <mxCell id="client-layer" value="🖥️ 客户端层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="360" height="120" as="geometry" />
        </mxCell>
        <mxCell id="web-client" value="Web客户端&lt;br&gt;(规划中)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;" parent="client-layer" vertex="1">
          <mxGeometry x="20" y="40" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mobile-client" value="Flutter移动端&lt;br&gt;跨平台客户端&lt;br&gt;📱 已开源" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#388E3C;fontSize=12;fontStyle=1;" parent="client-layer" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pc-client" value="PC客户端&lt;br&gt;(规划中)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;" parent="client-layer" vertex="1">
          <mxGeometry x="250" y="40" width="90" height="60" as="geometry" />
        </mxCell>

        <!-- 负载均衡层 -->
        <mxCell id="proxy-layer" value="⚖️ 负载均衡层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="480" y="40" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nginx" value="Nginx&lt;br&gt;负载均衡+反向代理&lt;br&gt;:80/:443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=12;" parent="proxy-layer" vertex="1">
          <mxGeometry x="20" y="40" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- 网关层 -->
        <mxCell id="gateway-layer" value="🚪 网关层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="760" y="40" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="gateway" value="Gateway网关&lt;br&gt;:8081&lt;br&gt;Spring Cloud Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=12;" parent="gateway-layer" vertex="1">
          <mxGeometry x="20" y="40" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- 业务服务层 -->
        <mxCell id="services-layer" value="🔧 业务服务层 (Docker Compose)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="200" width="940" height="160" as="geometry" />
        </mxCell>
        <mxCell id="auth-service" value="认证服务&lt;br&gt;im-auth:8082&lt;br&gt;OAuth2+Spring Security" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="20" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="connect-service" value="长连接服务&lt;br&gt;im-connect:10001&lt;br&gt;Netty WebSocket" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="200" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="business-service" value="业务服务&lt;br&gt;im-business:8083&lt;br&gt;核心消息处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="380" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="console-service" value="控制台服务&lt;br&gt;im-console:8084&lt;br&gt;管理后台" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="560" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="datasync-service" value="数据同步服务&lt;br&gt;im-data-sync:8085&lt;br&gt;HBase→ES同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="740" y="40" width="160" height="80" as="geometry" />
        </mxCell>

        <!-- 中间件层 -->
        <mxCell id="middleware-layer" value="⚙️ 中间件层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="400" width="460" height="140" as="geometry" />
        </mxCell>
        <mxCell id="nacos" value="Nacos&lt;br&gt;服务发现+配置中心&lt;br&gt;:8848" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="20" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="zookeeper" value="ZooKeeper&lt;br&gt;Dubbo注册中心&lt;br&gt;:2181" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="160" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rocketmq" value="RocketMQ&lt;br&gt;异步消息处理&lt;br&gt;:9876" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="300" y="40" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- 存储层 -->
        <mxCell id="storage-layer" value="💾 存储层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="520" y="400" width="460" height="140" as="geometry" />
        </mxCell>
        <mxCell id="mysql" value="MySQL&lt;br&gt;用户信息/会话数据&lt;br&gt;:3306" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hbase" value="HBase&lt;br&gt;消息存储&lt;br&gt;集群部署" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="140" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="redis" value="Redis&lt;br&gt;缓存/分布式锁&lt;br&gt;:6379" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="260" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="elasticsearch" value="Elasticsearch&lt;br&gt;消息搜索&lt;br&gt;:9200" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="380" y="40" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- 监控层 -->
        <mxCell id="monitor-layer" value="📊 监控观测" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="580" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="prometheus" value="Prometheus&lt;br&gt;指标采集&lt;br&gt;:9090" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=11;" parent="monitor-layer" vertex="1">
          <mxGeometry x="20" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="grafana" value="Grafana&lt;br&gt;监控面板&lt;br&gt;:3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=11;" parent="monitor-layer" vertex="1">
          <mxGeometry x="160" y="40" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- CI/CD层 -->
        <mxCell id="cicd-layer" value="🚀 CI/CD部署" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="380" y="580" width="360" height="140" as="geometry" />
        </mxCell>
        <mxCell id="git" value="Git仓库&lt;br&gt;源码管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jenkins" value="Jenkins&lt;br&gt;持续集成&lt;br&gt;Pipeline脚本" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="140" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="docker" value="Docker Compose&lt;br&gt;容器编排部署" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="260" y="40" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- 连接线 -->
        <!-- 客户端到负载均衡 -->
        <mxCell id="client-to-proxy" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="client-layer" target="proxy-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="100" as="sourcePoint" />
            <mxPoint x="480" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 负载均衡到网关 -->
        <mxCell id="proxy-to-gateway" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="proxy-layer" target="gateway-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="100" as="sourcePoint" />
            <mxPoint x="760" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 负载均衡到服务层 -->
        <mxCell id="proxy-to-services" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="proxy-layer" target="services-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="160" as="sourcePoint" />
            <mxPoint x="510" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 服务层到中间件 -->
        <mxCell id="services-to-middleware" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="services-layer" target="middleware-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="270" y="360" as="sourcePoint" />
            <mxPoint x="270" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 服务层到存储层 -->
        <mxCell id="services-to-storage" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="services-layer" target="storage-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="360" as="sourcePoint" />
            <mxPoint x="750" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 服务层到监控（虚线） -->
        <mxCell id="services-to-monitor" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="services-layer" target="monitor-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="190" y="360" as="sourcePoint" />
            <mxPoint x="190" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- CI/CD到服务层（虚线） -->
        <mxCell id="cicd-to-services" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="cicd-layer" target="services-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="580" as="sourcePoint" />
            <mxPoint x="560" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 标题 -->
        <mxCell id="title" value="XZLL-IM 分布式即时通讯系统架构图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1976D2;" parent="1" vertex="1">
          <mxGeometry x="300" y="0" width="500" height="30" as="geometry" />
        </mxCell>

        <!-- 图例 -->
        <mxCell id="legend" value="图例说明：&lt;br&gt;━━━ 主要数据流&lt;br&gt;┈┈┈ 监控/部署流" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="1050" y="40" width="150" height="80" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
