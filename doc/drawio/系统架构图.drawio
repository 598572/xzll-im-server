<mxfile host="Electron" modified="2026-01-29T04:35:58.871Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.1.18 Chrome/120.0.6099.199 Electron/28.1.2 Safari/537.36" etag="-wKLQocfxc2lvTU05OKy" version="22.1.18" type="device">
  <diagram name="XZLL-IMç³»ç»Ÿæž¶æž„å›¾" id="system-architecture">
    <mxGraphModel dx="1546" dy="947" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="client-layer" value="ðŸ–¥ï¸ å®¢æˆ·ç«¯å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="360" height="120" as="geometry" />
        </mxCell>
        <mxCell id="web-client" value="Webå®¢æˆ·ç«¯&lt;br&gt;(è§„åˆ’ä¸­)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;" parent="client-layer" vertex="1">
          <mxGeometry x="20" y="40" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mobile-client" value="Flutterç§»åŠ¨ç«¯&lt;br&gt;è·¨å¹³å°å®¢æˆ·ç«¯&lt;br&gt;ðŸ“± å·²å¼€æº" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#388E3C;fontSize=12;fontStyle=1;" parent="client-layer" vertex="1">
          <mxGeometry x="130" y="40" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pc-client" value="PCå®¢æˆ·ç«¯&lt;br&gt;(è§„åˆ’ä¸­)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;" parent="client-layer" vertex="1">
          <mxGeometry x="250" y="40" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="proxy-layer" value="âš–ï¸ è´Ÿè½½å‡è¡¡å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="480" y="40" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nginx" value="Nginx&lt;br&gt;è´Ÿè½½å‡è¡¡ï¼ˆæ ¹æ®userIdä¸€è‡´æ€§hashï¼‰+åå‘ä»£ç†&lt;br&gt;:80/:443" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;fontSize=12;" parent="proxy-layer" vertex="1">
          <mxGeometry x="20" y="40" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gateway-layer" value="ðŸšª ç½‘å…³å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="760" y="40" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="gateway" value="Gatewayç½‘å…³&lt;br&gt;:8081&lt;br&gt;Spring Cloud Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=12;" parent="gateway-layer" vertex="1">
          <mxGeometry x="20" y="40" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="services-layer" value="ðŸ”§ ä¸šåŠ¡æœåŠ¡å±‚ (Docker Compose)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="200" width="940" height="160" as="geometry" />
        </mxCell>
        <mxCell id="auth-service" value="è®¤è¯æœåŠ¡&lt;br&gt;im-auth:8082&lt;br&gt;OAuth2+Spring Security" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="20" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rcIh1Yzd-Te_dphHDzru-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="services-layer" source="connect-service" target="business-service" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rcIh1Yzd-Te_dphHDzru-2" value="Text" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="rcIh1Yzd-Te_dphHDzru-1" vertex="1" connectable="0">
          <mxGeometry x="0.1667" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="connect-service" value="é•¿è¿žæŽ¥æœåŠ¡&lt;br&gt;im-connect:10001&lt;br&gt;Netty WebSocket + gRPC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="200" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="business-service" value="ä¸šåŠ¡æœåŠ¡&lt;br&gt;im-business:8083&lt;br&gt;æ ¸å¿ƒæ¶ˆæ¯å¤„ç† + gRPC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="390" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="console-service" value="æŽ§åˆ¶å°æœåŠ¡&lt;br&gt;im-console:8084&lt;br&gt;ç®¡ç†åŽå°" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="570" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="datasync-service" value="æ•°æ®åŒæ­¥æœåŠ¡&lt;br&gt;im-data-sync:8085&lt;br&gt;MongoDBâ†’ESåŒæ­¥" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=11;" parent="services-layer" vertex="1">
          <mxGeometry x="750" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="middleware-layer" value="âš™ï¸ ä¸­é—´ä»¶å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="400" width="580" height="140" as="geometry" />
        </mxCell>
        <mxCell id="nacos" value="Nacos&lt;br&gt;æœåŠ¡å‘çŽ°+é…ç½®ä¸­å¿ƒ&lt;br&gt;:8848" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="20" y="40" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="grpc" value="gRPCé€šä¿¡å±‚&lt;br&gt;å¾®æœåŠ¡RPC&lt;br&gt;HTTP/2+ProtoBuf" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="170" y="40" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rocketmq" value="RocketMQ&lt;br&gt;å¼‚æ­¥æ¶ˆæ¯å¤„ç†&lt;br&gt;:9876" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" parent="middleware-layer" vertex="1">
          <mxGeometry x="320" y="40" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="smart-router" value="æ™ºèƒ½è·¯ç”±å±‚&lt;br&gt;MessageQueryRouter&lt;br&gt;MongoDB/ES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontSize=11;" vertex="1" parent="middleware-layer">
          <mxGeometry x="470" y="40" width="110" height="80" as="geometry" />
        </mxCell>
        <mxCell id="storage-layer" value="ðŸ’¾ å­˜å‚¨å±‚" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="640" y="400" width="400" height="140" as="geometry" />
        </mxCell>
        <mxCell id="mysql" value="MySQL&lt;br&gt;ç”¨æˆ·ä¿¡æ¯/ä¼šè¯æ•°æ®&lt;br&gt;:3306" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="20" y="40" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="mongodb" value="MongoDB&lt;br&gt;3èŠ‚ç‚¹åˆ†ç‰‡é›†ç¾¤&lt;br&gt;æŒ‰ä¼šè¯IDåˆ†ç‰‡" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" vertex="1" parent="storage-layer">
          <mxGeometry x="115" y="40" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="redis" value="Redis&lt;br&gt;ç¼“å­˜/åˆ†å¸ƒå¼é”&lt;br&gt;:6379" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="210" y="40" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="elasticsearch" value="Elasticsearch&lt;br&gt;æ¶ˆæ¯æœç´¢&lt;br&gt;:9200" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontSize=11;" parent="storage-layer" vertex="1">
          <mxGeometry x="305" y="40" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="monitor-layer" value="ðŸ“Š ç›‘æŽ§è§‚æµ‹" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="580" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="prometheus" value="Prometheus&lt;br&gt;æŒ‡æ ‡é‡‡é›†&lt;br&gt;:9090" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=11;" parent="monitor-layer" vertex="1">
          <mxGeometry x="20" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="grafana" value="Grafana&lt;br&gt;ç›‘æŽ§é¢æ¿&lt;br&gt;:3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=11;" parent="monitor-layer" vertex="1">
          <mxGeometry x="160" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cicd-layer" value="ðŸš€ CI/CDéƒ¨ç½²" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;strokeWidth=2;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="380" y="580" width="360" height="140" as="geometry" />
        </mxCell>
        <mxCell id="git" value="Gitä»“åº“&lt;br&gt;æºç ç®¡ç†" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="20" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jenkins" value="Jenkins&lt;br&gt;æŒç»­é›†æˆ&lt;br&gt;Pipelineè„šæœ¬" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="140" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="docker" value="Docker Compose&lt;br&gt;å®¹å™¨ç¼–æŽ’éƒ¨ç½²" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=11;" parent="cicd-layer" vertex="1">
          <mxGeometry x="260" y="40" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="client-to-proxy" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="client-layer" target="proxy-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="100" as="sourcePoint" />
            <mxPoint x="480" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="proxy-to-gateway" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="proxy-layer" target="gateway-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="100" as="sourcePoint" />
            <mxPoint x="760" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="proxy-to-services" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="proxy-layer" target="services-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="160" as="sourcePoint" />
            <mxPoint x="510" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="services-to-middleware" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="services-layer" target="middleware-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="270" y="360" as="sourcePoint" />
            <mxPoint x="270" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="services-to-storage" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" parent="1" source="services-layer" target="storage-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="360" as="sourcePoint" />
            <mxPoint x="750" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="services-to-monitor" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="services-layer" target="monitor-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="190" y="360" as="sourcePoint" />
            <mxPoint x="190" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cicd-to-services" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;dashed=1;" parent="1" source="cicd-layer" target="services-layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="580" as="sourcePoint" />
            <mxPoint x="560" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="grpc-communication" value="&lt;b&gt;gRPCé€šä¿¡&lt;/b&gt;" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=3;strokeColor=#0277BD;curved=1;" parent="1" source="connect-service" target="business-service" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="280" as="sourcePoint" />
            <mxPoint x="540" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="title" value="XZLL-IM åˆ†å¸ƒå¼å³æ—¶é€šè®¯ç³»ç»Ÿæž¶æž„å›¾" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1976D2;" parent="1" vertex="1">
          <mxGeometry x="300" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="å›¾ä¾‹è¯´æ˜Žï¼š&lt;br&gt;â”â”â” ä¸»è¦æ•°æ®æµ&lt;br&gt;â”ˆâ”ˆâ”ˆ ç›‘æŽ§/éƒ¨ç½²æµ&lt;br&gt;âŸµâ”â”âŸ¶ gRPCé€šä¿¡" style="text;html=1;strokeColor=#CCCCCC;fillColor=#F5F5F5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=0;" parent="1" vertex="1">
          <mxGeometry x="1050" y="40" width="150" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
