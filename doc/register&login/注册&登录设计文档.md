# ç™»å½•&æ³¨å†Œè®¾è®¡æ–‡æ¡£




### ğŸ“± ç”¨æˆ·ç™»å½•æµç¨‹
```mermaid
sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant G as Gateway
    participant A as AuthæœåŠ¡
    participant M as MySQL
    participant R as Redis
    participant CON as ConnectæœåŠ¡

    C->>G: ç™»å½•è¯·æ±‚(username/password/device_type)
    G->>A: è½¬å‘è®¤è¯è¯·æ±‚
    A->>M: æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯éªŒè¯å‡­æ®
    M->>A: è¿”å›ç”¨æˆ·æ•°æ®
    A->>A: ç”ŸæˆJWT Token
    A->>R: å­˜å‚¨Tokenå’Œç”¨æˆ·IDæ˜ å°„
    A->>G: è¿”å›JWT Token
    G->>C: ç™»å½•æˆåŠŸå“åº”
    Note over C: å®¢æˆ·ç«¯ä½¿ç”¨Tokenå»ºç«‹WebSocketè¿æ¥
    C->>CON: WebSocketè¿æ¥(æºå¸¦Token)
    CON->>R: éªŒè¯Tokenæœ‰æ•ˆæ€§
    R->>CON: TokenéªŒè¯é€šè¿‡
    CON->>C: WebSocketè¿æ¥å»ºç«‹æˆåŠŸ